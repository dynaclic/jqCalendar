<!DOCTYPE HTML>
<html>
<head>
	<script type="text/javascript" src="./dependencies/jquery-1.7.2.min.js"></script>
	<script type="text/javascript" src="./dependencies/jquery-ui-1.8.22.custom.min.js"></script>
	<link rel=StyleSheet href="./dependencies/ui-lightness/jquery-ui-1.8.22.custom.css">
	<script type="text/javascript" src="./dependencies/underscore-min.js"></script>
	<script type="text/javascript" src="./dependencies/backbone-min.js"></script>
	<script type="text/javascript" src="./dependencies/handlebars-1.0.0.beta.6.js"></script>
	<script type="text/javascript" src="./dependencies/jquery.qtip.min.js"></script>
	<script type="text/javascript" src="./dependencies/jquery.colourPicker.js"></script>
	<link rel=StyleSheet href="./dependencies/jquery.colourPicker.css">
	<link rel=StyleSheet href="./dependencies/jquery.qtip.min.css">
	<script type="text/javascript" src="./jquery.calendar.js"></script>
	<script type="text/javascript" src="./models.js"></script>
	<script type="text/javascript" src="./collections.js"></script>
	<script type="text/javascript" src="./views.js"></script>
	<script type="text/javascript" src="./templates.js"></script>
	<link rel=StyleSheet href="./style.css">
</head>
<body>
	<div id="calendar"></div>
</body>
<script type="text/javascript">

	$(function() {
		// test purposes
		event1 = new Date(('2012/08/29 08:00:00')).getTime();
		event2 = new Date(('2012/08/29 08:00:00')).getTime();
		event3 = new Date(('2012/08/29 08:30:00')).getTime();
		event4 = new Date(('2012/08/29 09:30:00')).getTime();
		event5 = new Date(('2012/08/29 11:00:00')).getTime();
		event6 = new Date(('2012/08/29 13:00:00')).getTime();
		event7 = new Date(('2012/08/29 13:00:00')).getTime();
		event8 = new Date(('2012/08/29 14:00:00')).getTime();
		event9 = new Date(('2012/08/29 15:00:00')).getTime();
		event10 = new Date(('2012/08/29 08:00:00')).getTime();
		event11 = new Date(('2012/08/23 12:00:00')).getTime();
		event12 = new Date(('2012/08/24 12:00:00')).getTime();
		event13 = new Date(('2012/08/23 12:00:00')).getTime();
		event14 = new Date(('2012/08/22 00:00:00')).getTime();
		
		jqcal.templates.event += '<br />{{people}}';
		jqcal.templates.event_create += '<br />People: <input type="text" name="jqcal_event_create_people" /><br />Unique: <input type="checkbox" name="jqcal_event_create_unique" />'+
			'<br />Gender: <input type="radio" name="jqcal_event_create_gender" value="M" /> M<input type="radio" name="jqcal_event_create_gender" value="F" /> F';
		jqcal.templates.event_edit += '<br />People: <input type="text" name="jqcal_event_edit_people" value="{{people}}" /><br />Unique: <input type="checkbox" name="jqcal_event_edit_unique" />'+
			'<br />Gender: <input type="radio" name="jqcal_event_edit_gender" value="M" /> M<input type="radio" name="jqcal_event_edit_gender" value="F" /> F';
		jqcal.templates.event_read += '<br />Unique: {{unique}}<br />Gender: {{gender}}';
		jqcal.event.push({
			name: 'people',
			elements: ['view', 'create', 'edit'],
			check: function(val) {
				if(!val.match(/[1-9]\d*/)) {
					return false;
				}
			}
		}, {
			name: 'unique',
			elements: ['create', 'read', 'edit'],
			type: 'checkbox'
		}, {
			name: 'gender',
			elements: ['create', 'read', 'edit'],
			type: 'radio',
			check: function(val) {
				if(!val) {
					return false;
				}
			}
		});
		
		$('#calendar').jqcal({
			/*no_perm_agenda	: ['edit', 'create', 'delete', 'read'],
			no_perm_event	: ['edit', 'create', 'delete', 'read'],*/
			edit_dialog		: true,
			calendar_ends_at: $.now() + 365*24*60*60*1000,
			date_format		: 'Y-m-d D',
			day_starts_at	: 8,
			day_ends_at		: 16,
			day_fraction	: 0.5,
			timezone_offset	: -120,
			first_day		: 1,
			planning_format	: 'week',
			/*hidden_days		: [0,6],*/
			nb_days			: 3/*,
			agenda_created	: function(agenda) {console.log('agenda created:');console.log(agenda);},
			agenda_changed	: function(agenda) {console.log('agenda changed:');console.log(agenda);},
			agenda_removed	: function(agenda) {console.log('agenda removed:');console.log(agenda);},
			event_created	: function(event) {console.log('event created:');console.log(event);},
			event_changed	: function(event) {console.log('event changed:');console.log(event);},
			event_removed	: function(event) {console.log('event removed:');console.log(event);}*/
		}).jqcal('add', [
			{
				label: 'a',
				description: 'some random description',
				color: '#FFFF54',
				events: [
					{
						starts_at: event1,
						ends_at: jqcal.time.addHours(event1, 6)
					}, {
						starts_at: event2,
						ends_at: jqcal.time.addHours(event2, 3.5)
					}, {
						starts_at: event6,
						ends_at: jqcal.time.addHours(event6, 2)
					}, {
						starts_at: event7,
						ends_at: jqcal.time.addHours(event7, 1.5)
					}, {
						starts_at: event9,
						ends_at: jqcal.time.addHours(event9, 1)
					}, {
						starts_at: event12,
						ends_at: jqcal.time.addHours(event12, 2)
					}, {
						starts_at: event13,
						ends_at: jqcal.time.addHours(event13, 2)
					},
					{
						starts_at: event14,
						ends_at: jqcal.time.addHours(event14, 72),
						fullDay: true
					}
				]
			},
			{
				label: 'b',
				color: '#6495ED',
				events: [
					{
						starts_at: event3,
						ends_at: jqcal.time.addHours(event3, 3)
					}, {
						starts_at: event4,
						ends_at: jqcal.time.addHours(event4, 3)
					}, {
						starts_at: event5,
						ends_at: jqcal.time.addHours(event5, 2.5)
					}, {
						starts_at: event8,
						ends_at: jqcal.time.addHours(event8, 1)
					}, {
						starts_at: event10,
						ends_at: jqcal.time.addHours(event10, 1)
					}, {
						starts_at: event11,
						ends_at: jqcal.time.addHours(event11, 34)
					},
					{
						starts_at: event14,
						ends_at: jqcal.time.addHours(event14, 48),
						fullDay: true
					}
				]
			}
		]);
		/*$('#calendar').jqcal('bindIds', {
			'c258': 10,
			'c260': 15,
			'c262': 20
		});
		$('#calendar').jqcal('removeIds', [15]);*/
	});
	
</script>
</html>